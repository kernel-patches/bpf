name: netdev

doc:
  netdev configuration over generic netlink.

definitions:
  -
    type: enum
    name: xdp-feat
    entries: [ aborted, drop, pass, redirect,
               ndo-xmit, xsk-zerocopy,
               hw-offload, rx-sg, ndo-xmit-sg
    ]

attribute-sets:
  -
    name: dev
    attributes:
      -
        name: ifindex
        doc: netdev ifindex
        type: u32
        value: 1
        checks:
          min: 1
      -
        name: pad
        type: pad
      -
        name: xdp-features
        doc: Bitmask of enabled xdp-features.
        type: u64
        enum: xdp-feat
        enum-as-flags: true

operations:
  list:
    -
      name: dev-get
      doc: Get / dump information about a netdev.
      value: 1
      attribute-set: dev
      do:
        request:
          attributes:
            - ifindex
        reply: &dev-all
          attributes:
            - ifindex
            - xdp-features
      dump:
        reply: *dev-all
    -
      name: dev-add-ntf
      doc: Notification about device appearing.
      notify: dev-get
      mcgrp: mgmt
    -
      name: dev-del-ntf
      doc: Notification about device disappearing.
      notify: dev-get
      mcgrp: mgmt
    -
      name: dev-change-ntf
      doc: Notification about device configuration being changed.
      notify: dev-get
      mcgrp: mgmt

mcast-groups:
  list:
    -
      name: mgmt
